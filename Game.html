<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>ch3ss</title>
		<link rel="stylesheet" href="static/css/main.css">
	</head>
	<body>
		<script src="static/js/three.js"></script>
		<script src="static/js/OrbitControls.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.2/TweenMax.min.js"></script>

		<script>
			var scene = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera(100, window.innerWidth / window.innerHeight, 0.1, 1000);
			camera.position.y = -6;
			var renderer = new THREE.WebGLRenderer({ antialias: true });		
			
			renderer.setClearColor("#ffffff");
			renderer.setSize(window.innerWidth, window.innerHeight);

			document.body.appendChild(renderer.domElement);

			controls = new THREE.OrbitControls(camera, renderer.domElement);
			controls.enableKeys = true;
			
			window.addEventListener('resize', () => {
				renderer.setSize(window.innerWidth, window.innerHeight);
				camera.aspect(window.innerWidth / window.innerHeight);
				camera.updateProjectionMatrix();
			})

			var light = new THREE.AmbientLight( 0x404040 );
			scene.add( light );
			
			var raycaster = new THREE.Raycaster();

			var geometry = new THREE.BoxGeometry(1, 1, 1);
			var material = new THREE.MeshLambertMaterial({color: 0xfdfdfd, transparent: true, opacity: 0.05});

			var n = 5;
			var group = new THREE.Group();

			for (var x = 0; x < n; x++) {
				for (var y = 0; y < n; y++) {
					for (var z = 0; z < n; z++) {
						var cube = new THREE.Mesh(geometry, material);
						cube.position.set(x - 2, y - 2, z - 2);
						group.add(cube);
					}
				}
			}

			scene.add(group);

			var whiteMaterial = new THREE.MeshBasicMaterial({color: 0xffffff});
			var blackMaterial = new THREE.MeshBasicMaterial({color: 0x000000});
			
			var pawnGeometry = new THREE.SphereGeometry(0.44);
			
			for (var i = 0; i < 2; i++) {
				for (var j = 0; j < 5; j++) {
					var whitePawn = new THREE.Mesh(pawnGeometry, whiteMaterial);
					whitePawn.position.set(j - 2, -1, i - 2);
					scene.add(whitePawn);
				}
			}

			for (var i = 0; i < 2; i++) {
				for (var j = 0; j < 5; j++) {
					var blackPawn = new THREE.Mesh(pawnGeometry, blackMaterial);
					blackPawn.position.set(j - 2, 1, i + 1);
					scene.add(blackPawn);
				}
			}

			var rookGeometry = new THREE.BoxGeometry(0.6, 0.6, 0.6);

			function addRook(color, position) {
				var rook;

				if (color == "white") {
					rook = new THREE.Mesh(rookGeometry, whiteMaterial);	
					rook.position.set(position, -2, -2);
				}

				if (color == "black") {
					rook = new THREE.Mesh(rookGeometry, blackMaterial);
					rook.position.set(position, 2, 2);
				}

				scene.add(rook);
			}

			addRook("white", -2);
			addRook("white", 2);
			addRook("black", -2);
			addRook("black", 2);

			var bishopGeometry = new THREE.CylinderGeometry(0.2, 0.25, 0.5, 16);

			function addBishop(color, position) {
				var bishop;

				if (color == "white") {
					bishop = new THREE.Mesh(bishopGeometry, whiteMaterial);
					bishop.position.set(position, -2, -1);
				}

				if (color == "black") {
					bishop = new THREE.Mesh(bishopGeometry, blackMaterial);
					bishop.position.set(position, 2, 1);
				}
				scene.add(bishop);
			}

			addBishop("white", -2);
			addBishop("white", 1);
			addBishop("black", -2);
			addBishop("black", 1);

			var knightGeometry = new THREE.CylinderGeometry(0.2, 0.25, 0.5, 16);

			function addKnight(color, position) {
				var knight;

				if (color == "white") {
					knight = new THREE.Mesh(knightGeometry, whiteMaterial);
					knight.position.set(position, -2, -1);
				}

				if (color == "black") {
					knight = new THREE.Mesh(knightGeometry, blackMaterial);
					knight.position.set(position, 2, 1);
				}
				scene.add(knight);
			}

			var unicornGeometry = new THREE.IcosahedronGeometry(0.35);

			function addUnicorn(color, position) {
				var unicorn;

				if (color == "white") {
					unicorn = new THREE.Mesh(unicornGeometry, whiteMaterial);
					unicorn.position.set(position, -2, -1);
				}

				if (color == "black") {
					unicorn = new THREE.Mesh(unicornGeometry, blackMaterial);
					unicorn.position.set(position, 2, 1);
				}
				scene.add(unicorn);
			}

			addUnicorn("white", -1);
			addUnicorn("white", 2);
			addUnicorn("black", -1);
			addUnicorn("black", 2);

			var kingGeometry = new THREE.TetrahedronGeometry(0.6);

			whiteKing = new THREE.Mesh(kingGeometry, whiteMaterial);
			whiteKing.position.set(0, -2, -2);
			scene.add(whiteKing);

			blackKing = new THREE.Mesh(kingGeometry, blackMaterial);
			blackKing.position.set(0, 2, 2);
			scene.add(blackKing);

			var queenGeometry = new THREE.ConeGeometry(0.25, 0.75, 16);

			whiteQueen = new THREE.Mesh(queenGeometry, whiteMaterial);
			whiteQueen.position.set(0, -2, -1);
			scene.add(whiteQueen);

			blackQueen = new THREE.Mesh(queenGeometry, blackMaterial);
			blackQueen.position.set(0, 2, 1);
			scene.add(blackQueen);

			var render = function() {
				controls.update();
				requestAnimationFrame(render);
				renderer.render(scene, camera);
			}

			render();
		</script>
	</body>
</html>